
cmake_minimum_required(VERSION 3.1.0)

project(PyEcore CXX)

set(PyEcore_SOURCES
        main.cpp
     	PyEPackage.cpp
	PyEClass.cpp
	PyEModuleBase.cpp
	PyEObject.cpp
        CXX/cxxsupport.cpp
	CXX/cxx_extensions.cpp
	CXX/cxxextensions.c
	CXX/IndirectPythonInterface.cpp
   )

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(CMAKE_CXX_FLAGS "-Wall")
set(CMAKE_CXX_FLAGS_DEBUG "-g")
set(CMAKE_CXX_FLAGS_RELEASE "")

# Find the correct python
include(FindPythonLibs)

# Ignore this project if no python interpreter found.
if(PYTHONLIBS_FOUND)

  include_directories(${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/../../emf4cpp ${PYTHON_INCLUDE_DIRS})

  add_executable(PyEcore ${PyEcore_HEADERS} ${PyEcore_SOURCES})
  target_link_libraries(PyEcore emf4cpp-ecore emf4cpp-ecorecpp ${PYTHON_LIBRARIES})

endif()

